<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xmlns="http://www.w3.org/1999/xhtml">
  
<!-- Mirrored from docs.aws.amazon.com/cli/latest/reference/kms/generate-data-key.html by HTTrack Website Copier/3.x [XR&CO'2013], Wed, 08 Jun 2016 08:36:21 GMT -->
<head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    
  
    <title>generate-data-key &#8212; AWS CLI 1.10.36 Command Reference</title>
  <link rel="stylesheet" type="text/css" href="../../_static/bootstrap.min.css" />
  <script type="text/javascript" src="../../_static/jquery-1.9.1.min.js"></script>
    
    <link rel="stylesheet" href="../../_static/guzzle.css" type="text/css" />
    <link rel="stylesheet" href="../../_static/pygments.css" type="text/css" />
    
    <script type="text/javascript"><![CDATA[
      var DOCUMENTATION_OPTIONS = {
        URL_ROOT:    '../../',
        VERSION:     '1.10.36',
        COLLAPSE_INDEX: false,
        FILE_SUFFIX: '.html',
        HAS_SOURCE:  true
      };
    ]]></script>
    <script type="text/javascript" src="../../_static/jquery.js"></script>
    <script type="text/javascript" src="../../_static/underscore.js"></script>
    <script type="text/javascript" src="../../_static/doctools.js"></script>
    <link rel="top" title="AWS CLI 1.10.36 Command Reference" href="../../index-2.html" />
    <link rel="up" title="kms" href="index.html" />
    <link rel="next" title="generate-data-key-without-plaintext" href="generate-data-key-without-plaintext.html" />
    <link rel="prev" title="encrypt" href="encrypt.html" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <link rel="stylesheet" type="text/css" href="../../_static/bootstrap-responsive.min.css" />
  
   

  </head>
  <body>
  <div class="navbar navbar-fixed-top ">
    <div class="navbar-inner">
      <div class="container">
        <a class="brand" href="../../index-2.html">AWS CLI Command Reference</a>
        <ul class="nav">
<li><a href="../../index-2.html">Home</a></li>
<li><a href="../../userguide/index.html">User Guide</a></li>
<li><a href="https://forums.aws.amazon.com/forum.jspa?forumID=150">Forum</a></li>
<li><a href="https://github.com/aws/aws-cli">GitHub</a></li>
        </ul>
        <div class="pull-right" id="github-stars">
          <iframe src="http://ghbtns.com/github-btn.html?user=aws&amp;repo=aws-cli&amp;type=watch&amp;count=true&amp;size=small" allowtransparency="true" frameborder="0" scrolling="0" width="110px" height="20px"></iframe>
        </div>
      </div>
    </div>
  </div>
  
  <!--REGION_DISCLAIMER_DO_NOT_REMOVE-->

    <div class="related">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="../../genindex.html" title="General Index" accesskey="I">index</a></li>
        <li class="right">
          <a href="generate-data-key-without-plaintext.html" title="generate-data-key-without-plaintext" accesskey="N">next</a> |</li>
        <li class="right">
          <a href="encrypt.html" title="encrypt" accesskey="P">previous</a> |</li>
        <li><a href="../../index-2.html">AWS CLI 1.10.36 Command Reference</a> &#187;</li>
          <li><a href="../index.html">aws</a> &#187;</li>
          <li><a href="index.html" accesskey="U">kms</a> &#187;</li> 
      </ul>
    </div>
    <div class="container">
        
    <div class="top-links">
      <ul class="breadcrumb pull-right">
        <li>
          <a href="encrypt.html" title="previous chapter (use the left arrow)">&#8592; encrypt</a>
          <span class="divider">/</span>
          
        </li>
          <li><a href="generate-data-key-without-plaintext.html" title="next chapter (use the right arrow)">generate-data-key-without-plaintext &#8594;</a></li>
      </ul>
    </div>
  
        <div class="document clearer">
      <div class="sphinxsidebar">
        <div class="sphinxsidebarwrapper"><p class="logo left-bar-other">
  <a href="../../index-2.html">
    <img class="logo" src="../../_static/logo.png" alt="Logo" height="63" />
  </a>
</p>
  <h3><a href="../../index-2.html">Table Of Contents</a></h3>
  <ul>
<li><a class="reference internal" href="#">generate-data-key</a><ul>
<li><a class="reference internal" href="#description">Description</a></li>
<li><a class="reference internal" href="#synopsis">Synopsis</a></li>
<li><a class="reference internal" href="#options">Options</a></li>
<li><a class="reference internal" href="#output">Output</a></li>
</ul>
</li>
</ul>

<div id="searchbox" style="display: none">
    <h3>Quick search</h3>
    <form class="form-search margin-top-1em" action="http://docs.aws.amazon.com/cli/latest/search.html" method="get">
        <input type="text" name="q" style="width: 105px" class="input-small search-query" />
        <button type="submit" class="btn btn-small">Search</button>
        <input type="hidden" name="check_keywords" value="yes" />
        <input type="hidden" name="area" value="default" />
    </form>
</div>
<script type="text/javascript"><![CDATA[$('#searchbox').show(0);]]></script><div class="left-bar-other">
  <h3>Feedback</h3>
  <p class="feedback">Did you find this page useful? Do you have a suggestion? <a href="https://portal.aws.amazon.com/gp/aws/html-forms-controller/documentation/aws_doc_feedback_04?service_name=AWS%20Command%20Line%20Interface&amp;guide_name=Reference&amp;api_version=1.10.&amp;file_name=reference/kms/generate-data-key">Give us feedback</a> or
  send us a <a href="https://github.com/aws/aws-cli">pull request</a> on GitHub.</p>
</div><div class="left-bar-other">
  <h3>User Guide</h3>
  <p>First time using the AWS CLI? See the
  <a href="../../userguide/index.html">User Guide</a> for
  help getting started.</p>
</div>
        </div>
      </div>
            <div class="body">
              
  <p>[ <a class="reference internal" href="../index.html#cli-aws"><em>aws</em></a> . <a class="reference internal" href="index.html#cli-aws-kms"><em>kms</em></a> ]</p>
<div class="section" id="generate-data-key">
<span id="cli-aws-kms-generate-data-key"></span><h1>generate-data-key<a name="//apple_ref/cpp/Command/aws kms generate-data-key" class="dashAnchor" id="aws kms generate-data-key"></a><a class="headerlink" href="#generate-data-key" title="Permalink to this headline">&#182;</a></h1>
<div class="section" id="description">
<h2>Description<a name="//apple_ref/cpp/Section/Description" class="dashAnchor" id="Description"></a><a class="headerlink" href="#description" title="Permalink to this headline">&#182;</a></h2>
<p>Generates a data key that you can use in your application to locally encrypt data. This call returns a plaintext version of the key in the <tt class="docutils literal"><span class="pre">Plaintext</span></tt> field of the response object and an encrypted copy of the key in the <tt class="docutils literal"><span class="pre">CiphertextBlob</span></tt> field. The key is encrypted by using the master key specified by the <tt class="docutils literal"><span class="pre">KeyId</span></tt> field. To decrypt the encrypted key, pass it to the <tt class="docutils literal"><span class="pre">decrypt</span></tt> API.</p>
<p>We recommend that you use the following pattern to locally encrypt data: call the <tt class="docutils literal"><span class="pre">generate-data-key</span></tt> API, use the key returned in the <tt class="docutils literal"><span class="pre">Plaintext</span></tt> response field to locally encrypt data, and then erase the plaintext data key from memory. Store the encrypted data key (contained in the <tt class="docutils literal"><span class="pre">CiphertextBlob</span></tt> field) alongside of the locally encrypted data.</p>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">You should not call the <tt class="docutils literal"><span class="pre">encrypt</span></tt> function to re-encrypt your data keys within a region. <tt class="docutils literal"><span class="pre">generate-data-key</span></tt> always returns the data key encrypted and tied to the customer master key that will be used to decrypt it. There is no need to decrypt it twice.</p>
</div>
<p>If you decide to use the optional <tt class="docutils literal"><span class="pre">EncryptionContext</span></tt> parameter, you must also store the context in full or at least store enough information along with the encrypted data to be able to reconstruct the context when submitting the ciphertext to the <tt class="docutils literal"><span class="pre">decrypt</span></tt> API. It is a good practice to choose a context that you can reconstruct on the fly to better secure the ciphertext. For more information about how this parameter is used, see <a class="reference external" href="http://docs.aws.amazon.com/kms/latest/developerguide/encrypt-context.html">Encryption Context</a> .</p>
<p>To decrypt data, pass the encrypted data key to the <tt class="docutils literal"><span class="pre">decrypt</span></tt> API. <tt class="docutils literal"><span class="pre">decrypt</span></tt> uses the associated master key to decrypt the encrypted data key and returns it as plaintext. Use the plaintext data key to locally decrypt your data and then erase the key from memory. You must specify the encryption context, if any, that you specified when you generated the key. The encryption context is logged by CloudTrail, and you can use this log to help track the use of particular data.</p>
</div>
<div class="section" id="synopsis">
<h2>Synopsis<a name="//apple_ref/cpp/Section/Synopsis" class="dashAnchor" id="Synopsis"></a><a class="headerlink" href="#synopsis" title="Permalink to this headline">&#182;</a></h2>
<div class="highlight-python"><pre>  generate-data-key
--key-id &lt;value&gt;
[--encryption-context &lt;value&gt;]
[--number-of-bytes &lt;value&gt;]
[--key-spec &lt;value&gt;]
[--grant-tokens &lt;value&gt;]
[--cli-input-json &lt;value&gt;]
[--generate-cli-skeleton]</pre>
</div>
</div>
<div class="section" id="options">
<h2>Options<a name="//apple_ref/cpp/Section/Options" class="dashAnchor" id="Options"></a><a class="headerlink" href="#options" title="Permalink to this headline">&#182;</a></h2>
<p><tt class="docutils literal"><a name="//apple_ref/cpp/Option/--key-id" class="dashAnchor" id="key-id"></a><span class="pre">--key-id</span></tt> (string)</p>
<blockquote>
<div><p>A unique identifier for the customer master key. This value can be a globally unique identifier, a fully specified ARN to either an alias or a key, or an alias name prefixed by "alias/".</p>
<ul class="simple">
<li>Key ARN Example - arn:aws:kms:us-east-1:123456789012:key/12345678-1234-1234-1234-123456789012</li>
<li>Alias ARN Example - arn:aws:kms:us-east-1:123456789012:alias/MyAliasName</li>
<li>Globally Unique Key ID Example - 12345678-1234-1234-1234-123456789012</li>
<li>Alias Name Example - alias/MyAliasName</li>
</ul>
</div></blockquote>
<p><tt class="docutils literal"><a name="//apple_ref/cpp/Option/--encryption-context" class="dashAnchor" id="encryption-context"></a><span class="pre">--encryption-context</span></tt> (map)</p>
<blockquote>
<div>Name/value pair that contains additional data to be authenticated during the encryption and decryption processes that use the key. This value is logged by AWS CloudTrail to provide context around the data encrypted by the key.</div></blockquote>
<p>Shorthand Syntax:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="n">KeyName1</span><span class="o">=</span><span class="n">string</span><span class="p">,</span><span class="n">KeyName2</span><span class="o">=</span><span class="n">string</span>
</pre></div>
</div>
<p>JSON Syntax:</p>
<div class="highlight-python"><pre>{"string": "string"
  ...}</pre>
</div>
<p><tt class="docutils literal"><a name="//apple_ref/cpp/Option/--number-of-bytes" class="dashAnchor" id="number-of-bytes"></a><span class="pre">--number-of-bytes</span></tt> (integer)</p>
<blockquote>
<div>Integer that contains the number of bytes to generate. Common values are 128, 256, 512, and 1024. 1024 is the current limit. We recommend that you use the <tt class="docutils literal"><span class="pre">KeySpec</span></tt> parameter instead.</div></blockquote>
<p><tt class="docutils literal"><a name="//apple_ref/cpp/Option/--key-spec" class="dashAnchor" id="key-spec"></a><span class="pre">--key-spec</span></tt> (string)</p>
<blockquote>
<div><p>Value that identifies the encryption algorithm and key size to generate a data key for. Currently this can be AES_128 or AES_256.</p>
<p>Possible values:</p>
<ul class="simple">
<li><tt class="docutils literal"><span class="pre">AES_256</span></tt></li>
<li><tt class="docutils literal"><span class="pre">AES_128</span></tt></li>
</ul>
</div></blockquote>
<p><tt class="docutils literal"><a name="//apple_ref/cpp/Option/--grant-tokens" class="dashAnchor" id="grant-tokens"></a><span class="pre">--grant-tokens</span></tt> (list)</p>
<blockquote>
<div><p>A list of grant tokens.</p>
<p>For more information, see <a class="reference external" href="http://docs.aws.amazon.com/kms/latest/developerguide/concepts.html#grant_token">Grant Tokens</a> in the <em>AWS Key Management Service Developer Guide</em> .</p>
</div></blockquote>
<p>Syntax:</p>
<div class="highlight-python"><pre>"string" "string" ...</pre>
</div>
<p><tt class="docutils literal"><a name="//apple_ref/cpp/Option/--cli-input-json" class="dashAnchor" id="cli-input-json"></a><span class="pre">--cli-input-json</span></tt> (string)
Performs service operation based on the JSON string provided. The JSON string follows the format provided by <tt class="docutils literal"><span class="pre">--generate-cli-skeleton</span></tt>. If other arguments are provided on the command line, the CLI values will override the JSON-provided values.</p>
<p><tt class="docutils literal"><a name="//apple_ref/cpp/Option/--generate-cli-skeleton" class="dashAnchor" id="generate-cli-skeleton"></a><span class="pre">--generate-cli-skeleton</span></tt> (boolean)
Prints a sample input JSON to standard output. Note the specified operation is not run if this argument is specified. The sample input can be used as an argument for <tt class="docutils literal"><span class="pre">--cli-input-json</span></tt>.</p>
</div>
<div class="section" id="output">
<h2>Output<a name="//apple_ref/cpp/Section/Output" class="dashAnchor" id="Output"></a><a class="headerlink" href="#output" title="Permalink to this headline">&#182;</a></h2>
<p>CiphertextBlob -&gt; (blob)</p>
<blockquote>
<div><p>Ciphertext that contains the encrypted data key. You must store the blob and enough information to reconstruct the encryption context so that the data encrypted by using the key can later be decrypted. You must provide both the ciphertext blob and the encryption context to the  decrypt API to recover the plaintext data key and decrypt the object.</p>
<p>If you are using the CLI, the value is Base64 encoded. Otherwise, it is not encoded.</p>
</div></blockquote>
<p>Plaintext -&gt; (blob)</p>
<blockquote>
<div>Plaintext that contains the data key. Use this for encryption and decryption and then remove it from memory as soon as possible.</div></blockquote>
<p>KeyId -&gt; (string)</p>
<blockquote>
<div>System generated unique identifier of the key to be used to decrypt the encrypted copy of the data key.</div></blockquote>
</div>
</div>


            </div>
          <div class="clearfix"></div>
        </div>
        
    <div class="footer-links">
      <ul class="breadcrumb pull-right">
        <li>
          <a href="encrypt.html" title="previous chapter (use the left arrow)">&#8592; encrypt</a>
          <span class="divider">/</span>
          
        </li>
          <li><a href="generate-data-key-without-plaintext.html" title="next chapter (use the right arrow)">generate-data-key-without-plaintext &#8594;</a></li>
      </ul>
    </div>
  

    </div>
  <script type="text/javascript" src="https://media.amazonwebservices.com/js/sitecatalyst/s_code.min.js"></script>
  <script type="text/javascript"><![CDATA[
  s.prop66 = 'AWS CLI';
  s.eVar66 = 'D=c66';
  s.prop65 = 'API Reference';
  s.eVar65 = 'D=c65';
  var s_code = s.t();
  if (s_code) document.write(s_code);
  ]]></script>
    <div class="related">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="../../genindex.html" title="General Index">index</a></li>
        <li class="right">
          <a href="generate-data-key-without-plaintext.html" title="generate-data-key-without-plaintext">next</a> |</li>
        <li class="right">
          <a href="encrypt.html" title="encrypt">previous</a> |</li>
        <li><a href="../../index-2.html">AWS CLI 1.10.36 Command Reference</a> &#187;</li>
          <li><a href="../index.html">aws</a> &#187;</li>
          <li><a href="index.html">kms</a> &#187;</li> 
      </ul>
    </div>
  <div class="footer container">
    &#169; Copyright 2016, Amazon Web Services. Created using <a href="http://sphinx.pocoo.org/">Sphinx</a>.
  </div>



  
    
  
  </body>

<!-- Mirrored from docs.aws.amazon.com/cli/latest/reference/kms/generate-data-key.html by HTTrack Website Copier/3.x [XR&CO'2013], Wed, 08 Jun 2016 08:36:21 GMT -->
</html>
